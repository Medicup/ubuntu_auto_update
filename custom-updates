#!/bin/bash
#This script allows for update, upgrade, and dist-upgrade
#Author: Stephen J Kennedy
#The file path is in a hidden directory in the /var/log./autoUpdate
#Filename will be the dailyUpdate

HOST=$(hostname -f)
DATE=`date +%m-%d-%y`
TIME=`date +%H:%M:%S`
FILEPATH=/var/log/.autoUpdate
FILENAME=dailyUpdate
OUTPUT=$FILEPATH/$FILENAME
MAIL=/usr/sbin/sendmail
TO=medicup@gmail.com

mailOutput(){
        $MAIL -F admin@${THISHOST} -t $TO < $OUTPUT
}

autoUpdate (){
echo "Starting update for $HOSTNAME at $TIME on ${DATE}." > $OUTPUT
apt-get update -qq >> $OUTPUT &&
apt-get upgrade -qq >>  $OUTPUT &&
apt-get dist-upgrade -qq >> $OUTPUT &&
apt-get autoremove -qq  >> $OUTPUT || echo "****ALERT: There was an error with the update****" >> $OUTPUT
}

autoUpdate;
mailOutput;

